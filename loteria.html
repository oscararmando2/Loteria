<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lotería El Mexiquense Market</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    body {
      font-family: Arial, sans-serif;
      background-image: url('https://www.transparenttextures.com/patterns/papel-picado.png');
      background-size: cover;
      background-attachment: fixed;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      margin: 0;
      flex-direction: column;
      text-align: center;
      color: #333;
    }
    .container {
      background-color: #fff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      max-width: 600px;
      width: 90%;
    }
    h1 {
      color: #198452;
      font-size: 2.5em;
      margin-bottom: 10px;
    }
    #card-image {
      width: 200px;
      height: 300px;
      margin: 20px auto;
      border: 4px solid #198452;
      border-radius: 15px;
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
      background: linear-gradient(45deg, #D03937, #198452);
      padding: 5px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    #card-image img {
      width: 100%;
      height: 100%;
      border-radius: 10px;
      object-fit: cover;
    }
    #card-image.loading::before {
      content: "Cargando...";
      color: #333;
      font-size: 1.2em;
    }
    #card-name {
      font-size: 1.8em;
      color: #D03937;
      margin: 10px 0;
    }
    #tablero {
      display: grid;
      grid-template-columns: repeat(4, 50px);
      gap: 5px;
      margin: 20px auto;
      max-width: 220px;
    }
    #controls {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin: 20px 0;
    }
    #controls button {
      background-color: #D03937;
      color: #fff;
      border: none;
      padding: 10px 20px;
      font-size: 1.2em;
      border-radius: 5px;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    #controls button:hover {
      background-color: #198452;
    }
    select {
      padding: 8px;
      font-size: 1em;
      border-radius: 5px;
      border: 1px solid #198452;
    }
    .share-buttons {
      margin-top: 20px;
      display: flex;
      gap: 10px;
      justify-content: center;
    }
    .share-buttons a {
      color: #D03937;
      font-size: 1.2em;
      text-decoration: none;
    }
    .share-buttons a:hover {
      color: #198452;
    }
    @media (max-width: 600px) {
      h1 {
        font-size: 2em;
      }
      #card-image {
        width: 150px;
        height: 225px;
      }
      #card-name {
        font-size: 1.5em;
      }
      #controls button, select {
        font-size: 1em;
        padding: 8px 16px;
      }
      #tablero {
        grid-template-columns: repeat(4, 40px);
        max-width: 176px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <img src="imagenes/logo.png" alt="El Mexiquense Market" style="width: 120px; margin-bottom: 20px;">
    <h1>Lotería El Mexiquense Market</h1>
    <div id="card-image">Selecciona una carta</div>
    <div id="card-name"></div>
    <div id="tablero"></div>
    <div id="controls">
      <select id="speed-select" onchange="updateSpeed()">
        <option value="3000">Rápido (3s)</option>
        <option value="5000" selected>Normal (5s)</option>
        <option value="7000">Lento (7s)</option>
      </select>
      <button id="play-button" onclick="togglePlay()" aria-label="Iniciar la lotería"><i class="fas fa-play"></i> Jugar</button>
      <button id="pause-button" onclick="pauseGame()" style="display: none;" aria-label="Pausar la lotería"><i class="fas fa-pause"></i> Pausar</button>
      <button id="resume-button" onclick="resumeGame()" style="display: none;" aria-label="Seguir jugando la lotería"><i class="fas fa-play"></i> Seguir Jugando</button>
      <button id="reset-button" onclick="resetGame()" aria-label="Reiniciar el juego"><i class="fas fa-redo"></i> Reiniciar Juego</button>
      <a href="tableros.pdf" download><button>Descargar Tableros</button></a>
    </div>
    <div class="share-buttons">
      <a href="https://www.instagram.com/share?url=https://oscararmando2.github.io/Loteria/" target="_blank"><i class="fab fa-instagram"></i> Instagram</a>
      <a href="https://api.whatsapp.com/send?text=¡Juega la Lotería El Mexiquense Market! https://oscararmando2.github.io/Loteria/" target="_blank"><i class="fab fa-whatsapp"></i> WhatsApp</a>
    </div>
  </div>
  <audio id="sound-effect" src="https://freesound.org/data/previews/123/456_789.mp3"></audio>

  <script>
    const cards = [
      { name: "EL ACHIOTE", image: "imagenes/EL_ACHIOTE.png" },
      { name: "EL AGUACATE", image: "imagenes/EL_AGUACATE.png" },
      { name: "EL AGUILA", image: "imagenes/EL_AGUILA.png" },
      { name: "EL AREQUIPE", image: "imagenes/EL_AREQUIPE.png" },
      { name: "EL ATOL", image: "imagenes/EL_ATOL.png" },
      { name: "EL CHICHARRON", image: "imagenes/EL_CHICHARRON.png" },
      { name: "EL CHILE", image: "imagenes/EL_CHILE.png" },
      { name: "EL CURTIDO", image: "imagenes/EL_CURTIDO.png" },
      { name: "EL GALLO", image: "imagenes/EL_GALLO.png" },
      { name: "EL KLASS", image: "imagenes/EL_KLASS.png" },
      { name: "EL LOROCO", image: "imagenes/EL_LOROCO.png" },
      { name: "EL MILAGRO", image: "imagenes/EL_MILAGRO.png" },
      { name: "EL MOLE", image: "imagenes/EL_MOLE.png" },
      { name: "EL NOPAL", image: "imagenes/EL_NOPAL.png" },
      { name: "EL PLATANO", image: "imagenes/EL_PLATANO.png" },
      { name: "EL QUESO", image: "imagenes/EL_QUESO.png" },
      { name: "EL SELLO ROJO", image: "imagenes/EL_SELLO_ROJO.png" },
      { name: "EL TAMAL", image: "imagenes/EL_TAMAL.png" },
      { name: "EL TEQUENO", image: "imagenes/EL_TEQUENO.png" },
      { name: "LA AREPA", image: "imagenes/LA_AREPA.png" },
      { name: "LA BALEADA", image: "imagenes/LA_BALEADA.png" },
      { name: "LA CACHAPA", image: "imagenes/LA_CACHAPA.png" },
      { name: "LA CHICHA", image: "imagenes/LA_CHICHA.png" },
      { name: "LA COLOMBIANA", image: "imagenes/LA_COLOMBIANA.png" },
      { name: "LA CORONA", image: "imagenes/LA_CORONA.png" },
      { name: "LA COSTEÑA", image: "imagenes/LA_COSTEÑA.png" },
      { name: "LA CREMA", image: "imagenes/LA_CREMA.png" },
      { name: "LA JUANITA", image: "imagenes/LA_JUANITA.png" },
      { name: "LA LUPITA", image: "imagenes/LA_LUPITA.png" },
      { name: "LA MALTA", image: "imagenes/LA_MALTA.png" },
      { name: "LA MANTECA", image: "imagenes/LA_MANTECA.png" },
      { name: "LA MARUCHAN", image: "imagenes/LA_MARUCHAN.png" },
      { name: "LA MASECA", image: "imagenes/LA_MASECA.png" },
      { name: "LA MAYO", image: "imagenes/LA_MAYO.png" },
      { name: "LA PANELA", image: "imagenes/LA_PANELA.png" },
      { name: "LA VICTORIA", image: "imagenes/LA_VICTORIA.png" },
      { name: "LA YUCA", image: "imagenes/LA_YUCA.png" },
      { name: "LAS CHARRAS", image: "imagenes/LAS_CHARRAS.png" },
      { name: "LAS GUASCAS", image: "imagenes/LAS_GUASCAS.png" },
      { name: "LAS PUPUSAS", image: "imagenes/LAS_PUPUSAS.png" },
      { name: "LAS SABRITAS", image: "imagenes/LAS_SABRITAS.png" },
      { name: "LOS FRIJOLES", image: "imagenes/LOS_FRIJOLES.png" },
      { name: "LOS JARRITOS", image: "imagenes/LOS_JARRITOS.png" },
      { name: "LOS MADUROS", image: "imagenes/LOS_MADUROS.png" },
      { name: "LOS QUIPITOS", image: "imagenes/LOS_QUIPITOS.png" },
      { name: "LOS TAKIS", image: "imagenes/LOS_TAKIS.png" },
      { name: "LOS TOTOPOS", image: "imagenes/LOS_TOTOPOS.png" },
      { name: "LOS ZAMBOS", image: "imagenes/LOS_ZAMBOS.png" }
    ];

    const tableros = [
      ["EL ACHIOTE", "LA MASECA", "EL AGUACATE", "LA COSTEÑA", "LOS ZAMBOS", "EL AGUILA", "LA COLOMBIANA", "LAS PUPUSAS", "LAS SABRITAS", "LA LUPITA", "EL GALLO", "LA CORONA", "LOS QUIPITOS", "LA MAYO", "EL MILAGRO", "LOS TAKIS"],
      ["LA JUANITA", "LA MARUCHAN", "LA CHICHA", "EL KLASS", "LA VICTORIA", "EL ATOL", "LA YUCA", "EL SELLO ROJO", "LA PANELA", "EL PLATANO", "EL LOROCO", "EL TEQUENO", "EL ACHIOTE", "LOS FRIJOLES", "LA CACHAPA", "EL CHILE"],
      ["EL TAMAL", "EL CHICHARRON", "LA BALEADA", "EL QUESO", "LA CORONA", "EL AREQUIPE", "LOS MADUROS", "LAS GUASCAS", "EL MOLE", "LA MALTA", "LA CREMA", "EL CURTIDO", "LA YUCA", "EL NOPAL", "EL AGUILA", "LOS TOTOPOS"],
      ["LOS JARRITOS", "LOS TAKIS", "LA MANTECA", "LA JUANITA", "LA AREPA", "LA MARUCHAN", "LA CHICHA", "EL KLASS", "LA VICTORIA", "EL ATOL", "LA YUCA", "EL ACHIOTE", "LA MASECA", "EL AGUACATE", "LA COSTEÑA", "LOS ZAMBOS"],
      ["EL AGUILA", "LA COLOMBIANA", "LAS PUPUSAS", "LAS SABRITAS", "LA LUPITA", "EL GALLO", "LA CORONA", "LOS QUIPITOS", "LA MAYO", "EL MILAGRO", "LOS TAKIS", "LA JUANITA", "LA MARUCHAN", "LA CHICHA", "EL KLASS", "LA VICTORIA"],
      ["EL ATOL", "LA YUCA", "EL SELLO ROJO", "LA PANELA", "EL PLATANO", "EL LOROCO", "EL TEQUENO", "EL ACHIOTE", "LOS FRIJOLES", "LA CACHAPA", "EL CHILE", "EL TAMAL", "EL CHICHARRON", "LA BALEADA", "EL QUESO", "LA CORONA"],
      ["EL AREQUIPE", "LOS MADUROS", "LAS GUASCAS", "EL MOLE", "LA MALTA", "LA CREMA", "EL CURTIDO", "LA YUCA", "EL NOPAL", "EL AGUILA", "LOS TOTOPOS", "LOS JARRITOS", "LOS TAKIS", "LA MANTECA", "LA JUANITA", "LA MARUCHAN"],
      ["LA CHICHA", "EL KLASS", "LA VICTORIA", "EL ATOL", "LA YUCA", "EL ACHIOTE", "LA MASECA", "EL AGUACATE", "LA COSTEÑA", "LOS ZAMBOS", "EL AGUILA", "LA COLOMBIANA", "LAS PUPUSAS", "LAS SABRITAS", "LA LUPITA", "EL GALLO"],
      ["LA CORONA", "LOS QUIPITOS", "LA MAYO", "EL MILAGRO", "LOS TAKIS", "LA JUANITA", "LA MARUCHAN", "LA CHICHA", "EL KLASS", "LA VICTORIA", "EL ATOL", "LA YUCA", "EL SELLO ROJO", "LA PANELA", "EL PLATANO", "EL LOROCO"],
      ["EL TEQUENO", "EL ACHIOTE", "LOS FRIJOLES", "LA CACHAPA", "EL CHILE", "EL TAMAL", "EL CHICHARRON", "LA BALEADA", "EL QUESO", "LA CORONA", "EL AREQUIPE", "LOS MADUROS", "LAS GUASCAS", "EL MOLE", "LA MALTA", "LA CREMA"]
    ];

    let deck = [...cards];
    let currentIndex = deck.length;
    let isPlaying = false;
    let intervalId = null;

    function shuffleDeck() {
      for (let i = currentIndex - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [deck[i], deck[j]] = [deck[j], deck[i]];
      }
    }

    function drawCard() {
      if (currentIndex === 0) {
        alert("¡Se han usado todas las cartas! Barajando de nuevo...");
        deck = [...cards];
        currentIndex = deck.length;
        shuffleDeck();
      }
      currentIndex--;
      const card = deck[currentIndex];
      document.getElementById("card-name").textContent = card.name;
      const imageDiv = document.getElementById("card-image");
      imageDiv.classList.add("loading");
      imageDiv.innerHTML = `<img src="${card.image}" alt="${card.name}" onload="this.parentElement.classList.remove('loading')" onerror="this.src='https://via.placeholder.com/200x300?text=${encodeURIComponent(card.name)}'">`;
      document.getElementById("sound-effect").play();
      speakCard(card);
    }

    function speakCard(card) {
      const utterance1 = new SpeechSynthesisUtterance(card.name);
      utterance1.lang = "es-MX";
      utterance1.rate = 0.9;
      utterance1.pitch = 1;
      const utterance2 = new SpeechSynthesisUtterance(card.name);
      utterance2.lang = "es-MX";
      utterance2.rate = 0.9;
      utterance2.pitch = 1;
      window.speechSynthesis.speak(utterance1);
      setTimeout(() => window.speechSynthesis.speak(utterance2), 2000);
    }

    function togglePlay() {
      if (isPlaying) return;
      isPlaying = true;
      document.getElementById("play-button").style.display = "none";
      document.getElementById("pause-button").style.display = "inline-block";
      document.getElementById("resume-button").style.display = "none";
      drawCard();
      const speed = parseInt(document.getElementById("speed-select").value);
      intervalId = setInterval(drawCard, speed);
    }

    function pauseGame() {
      if (!isPlaying) return;
      clearInterval(intervalId);
      isPlaying = false;
      document.getElementById("pause-button").style.display = "none";
      document.getElementById("resume-button").style.display = "inline-block";
    }

    function resumeGame() {
      if (isPlaying) return;
      isPlaying = true;
      document.getElementById("pause-button").style.display = "inline-block";
      document.getElementById("resume-button").style.display = "none";
      const speed = parseInt(document.getElementById("speed-select").value);
      intervalId = setInterval(drawCard, speed);
    }

    function resetGame() {
      clearInterval(intervalId);
      isPlaying = false;
      deck = [...cards];
      currentIndex = deck.length;
      shuffleDeck();
      document.getElementById("card-name").textContent = "";
      document.getElementById("card-image").innerHTML = "Selecciona una carta";
      document.getElementById("play-button").style.display = "inline-block";
      document.getElementById("pause-button").style.display = "none";
      document.getElementById("resume-button").style.display = "none";
      loadTablero();
    }

    function updateSpeed() {
      if (isPlaying) {
        clearInterval(intervalId);
        const speed = parseInt(document.getElementById("speed-select").value);
        intervalId = setInterval(drawCard, speed);
      }
    }

    function loadTablero() {
      const tablero = tableros[Math.floor(Math.random() * tableros.length)];
      const tableroDiv = document.getElementById("tablero");
      tableroDiv.innerHTML = tablero.map(name => {
        const card = cards.find(c => c.name === name);
        return `<img src="${card.image}" alt="${name}" style="width: 50px; height: 75px; border-radius: 5px;">`;
      }).join('');
    }

    // Initialize
    shuffleDeck();
    window.onload = loadTablero;
  </script>
</body>
</html>
