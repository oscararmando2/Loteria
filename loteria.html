<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lotería El Mexiquense Market</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    body {
      font-family: Arial, sans-serif;
      background-image: url('https://www.transparenttextures.com/patterns/papel-picado.png');
      background-size: cover;
      background-attachment: fixed;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      margin: 0;
      flex-direction: column;
      text-align: center;
      color: #333;
    }
    .container {
      background-color: #fff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      max-width: 600px;
      width: 90%;
    }
    h1 {
      color: #198452;
      font-size: 2.5em;
      margin-bottom: 10px;
    }
    #card-image {
      width: 200px;
      height: 300px;
      margin: 20px auto;
      border: 4px solid #198452;
      border-radius: 15px;
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
      background: linear-gradient(45deg, #D03937, #198452);
      padding: 5px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    #card-image img {
      width: 100%;
      height: 100%;
      border-radius: 10px;
      object-fit: cover;
    }
    #card-image.loading::before {
      content: "Cargando...";
      color: #333;
      font-size: 1.2em;
    }
    #card-name {
      font-size: 1.8em;
      color: #D03937;
      margin: 10px 0;
    }
    #tablero {
      display: grid;
      grid-template-columns: repeat(4, 50px);
      gap: 5px;
      margin: 20px auto;
      max-width: 220px;
    }
    #controls {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin: 20px 0;
    }
    #controls button {
      background-color: #D03937;
      color: #fff;
      border: none;
      padding: 10px 20px;
      font-size: 1.2em;
      border-radius: 5px;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    #controls button:hover {
      background-color: #198452;
    }
    select {
      padding: 8px;
      font-size: 1em;
      border-radius: 5px;
      border: 1px solid #198452;
    }
    .share-buttons {
      margin-top: 20px;
      display: flex;
      gap: 10px;
      justify-content: center;
    }
    .share-buttons a {
      color: #D03937;
      font-size: 1.2em;
      text-decoration: none;
    }
    .share-buttons a:hover {
      color: #198452;
    }
    @media (max-width: 600px) {
      h1 {
        font-size: 2em;
      }
      #card-image {
        width: 150px;
        height: 225px;
      }
      #card-name {
        font-size: 1.5em;
      }
      #controls button, select {
        font-size: 1em;
        padding: 8px 16px;
      }
      #tablero {
        grid-template-columns: repeat(4, 40px);
        max-width: 176px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <img src="imagenes/logo.png" alt="El Mexiquense Market" style="width: 120px; margin-bottom: 20px;">
    <h1>Lotería El Mexiquense Market</h1>
    <div id="card-image">Selecciona una carta</div>
    <div id="card-name"></div>
    <div id="tablero"></div>
    <div id="controls">
      <select id="speed-select" onchange="updateSpeed()">
        <option value="3000">Rápido (3s)</option>
        <option value="5000" selected>Normal (5s)</option>
        <option value="7000">Lento (7s)</option>
      </select>
      <button id="play-button" onclick="togglePlay()" aria-label="Iniciar la lotería"><i class="fas fa-play"></i> Jugar</button>
      <button id="pause-button" onclick="pauseGame()" style="display: none;" aria-label="Pausar la lotería"><i class="fas fa-pause"></i> Pausar</button>
      <button id="resume-button" onclick="resumeGame()" style="display: none;" aria-label="Seguir jugando la lotería"><i class="fas fa-play"></i> Seguir Jugando</button>
      <button id="reset-button" onclick="resetGame()" aria-label="Reiniciar el juego"><i class="fas fa-redo"></i> Reiniciar Juego</button>
      <a href="tableros.pdf" download><button>Descargar Tableros</button></a>
    </div>
    <div class="share-buttons">
      <a href="https://www.instagram.com/share?url=https://oscararmando2.github.io/Loteria/" target="_blank"><i class="fab fa-instagram"></i> Instagram</a>
      <a href="https://api.whatsapp.com/send?text=¡Juega la Lotería El Mexiquense Market! https://oscararmando2.github.io/Loteria/" target="_blank"><i class="fab fa-whatsapp"></i> WhatsApp</a>
    </div>
  </div>
  <audio id="sound-effect" src="https://freesound.org/data/previews/123/456_789.mp3"></audio>

  <script>
    const cards = [
      { name: "La Maseca", image: "imagenes/la maseca.png" },
      { name: "El Jarrito", image: "imagenes/los jarritos.png" },
      { name: "La Harina Pan", image: "imagenes/las arepas.png" },
      { name: "Los Zambos", image: "imagenes/los zambos.png" },
      { name: "El Sello Rojo", image: "imagenes/el sello rojo.png" },
      { name: "La Panela", image: "imagenes/la panela.png" },
      { name: "La Pupusa", image: "imagenes/la pupusa.png" },
      { name: "El Café Águila", image: "imagenes/el aguila.png" },
      { name: "El Plátano", image: "imagenes/el platano.png" },
      { name: "El Loroco", image: "imagenes/el loroco.png" },
      { name: "El Tequeño", image: "imagenes/el tequeño.png" },
      { name: "El Achiote", image: "imagenes/el achiote.png" },
      { name: "El Aguacate", image: "imagenes/el aguacate.png" },
      { name: "Los Frijoles", image: "imagenes/los frijoles.png" },
      { name: "La Costeña", image: "imagenes/la costeña.png" },
      { name: "La Colombiana", image: "imagenes/colombiana.png" },
      { name: "La Cachapa", image: "imagenes/las cachapas.png" },
      { name: "El Chile", image: "imagenes/el chile.png" },
      { name: "Las Sabritas", image: "imagenes/las sabritas.png" },
      { name: "El Tamal", image: "imagenes/el tamal.png" },
      { name: "La Guadalupe", image: "imagenes/la lupita.png" },
      { name: "Los Chicharrones", image: "imagenes/el chicharon.png" },
      { name: "El Gallo", image: "imagenes/el gallo.png" },
      { name: "La Baleada", image: "imagenes/la baleada.png" },
      { name: "La Corona", image: "imagenes/la corona.png" },
      { name: "La Tostada", image: "imagenes/las charras.png" },
      { name: "El Arequipe", image: "imagenes/el arequipe.png" },
      { name: "Los Quipitos", image: "imagenes/los quipitos.png" },
      { name: "Los Platanitos", image: "imagenes/los maduros.png" },
      { name: "La Guascas", image: "imagenes/las guascas.png" },
      { name: "El Mole", image: "imagenes/el mole.png" },
      { name: "La Malta", image: "imagenes/la malta.png" },
      { name: "La Crema", image: "imagenes/crema.png" },
      { name: "El Curtido", image: "imagenes/curtido.png" },
      { name: "La Yuca", image: "imagenes/yuca.png" },
      { name: "El Nopal", image: "imagenes/nopal.png" },
      { name: "La Mayonessa", image: "imagenes/mayonessa.png" },
      { name: "La Cerveza Águila", image: "imagenes/cerveza_aguila.png" },
      { name: "Los Totopos", image: "imagenes/totopos.png" },
      { name: "El Refresco Pilsener", image: "imagenes/pilsener.png" },
      { name: "El Milagro", image: "imagenes/milagro.png" },
      { name: "Los Takis", image: "imagenes/takis.png" },
      { name: "La Manteca", image: "imagenes/manteca.png" },
      { name: "La Juanita", image: "imagenes/juanita.png" },
      { name: "La Arepa", image: "imagenes/arepa.png" },
      { name: "El Queso de Mano", image: "imagenes/queso_de_mano.png" },
      { name: "La Finca", image: "imagenes/finca.png" },
      { name: "El Chipotle", image: "imagenes/chipotle.png" },
      { name: "La Oblea", image: "imagenes/oblea.png" },
      { name: "La Sopa", image: "imagenes/sopa.png" },
      { name: "El Klass", image: "imagenes/klass.png" },
      { name: "La Victoria", image: "imagenes/victoria.png" },
      { name: "El Atol", image: "imagenes/atol.png" },
      { name: "La Chicha", image: "imagenes/chicha.png" }
    ];

    const tableros = [
      ["El Maseca", "La Harina Pan", "El Aguacate", "La Costeña", "Los Zambos", "El Café Águila", "La Colombiana", "La Pupusa", "Las Sabritas", "La Guadalupe", "El Gallo", "La Corona", "Los Quipitos", "La Mayonessa", "El Milagro", "Los Takis"],
      ["La Juanita", "La Finca", "La Sopa", "El Klass", "La Victoria", "El Atol", "La Chicha", "El Sello Rojo", "La Panela", "El Plátano", "El Loroco", "El Tequeño", "El Achiote", "Los Frijoles", "La Cachapa", "El Chile"],
      ["El Tamal", "Los Chicharrones", "La Baleada", "El Queso de Mano", "La Tostada", "El Arequipe", "Los Platanitos", "La Guascas", "El Mole", "La Malta", "La Crema", "El Curtido", "La Yuca", "El Nopal", "La Cerveza Águila", "Los Totopos"],
      ["El Refresco Pilsener", "Los Takis", "La Manteca", "La Juanita", "La Arepa", "La Finca", "La Sopa", "El Klass", "La Victoria", "El Atol", "La Chicha", "El Maseca", "La Harina Pan", "El Aguacate", "La Costeña", "Los Zambos"],
      ["El Café Águila", "La Colombiana", "La Pupusa", "Las Sabritas", "La Guadalupe", "El Gallo", "La Corona", "Los Quipitos", "La Mayonessa", "El Milagro", "Los Takis", "La Juanita", "La Finca", "La Sopa", "El Klass", "La Victoria"],
      ["El Atol", "La Chicha", "El Sello Rojo", "La Panela", "El Plátano", "El Loroco", "El Tequeño", "El Achiote", "Los Frijoles", "La Cachapa", "El Chile", "El Tamal", "Los Chicharrones", "La Baleada", "El Queso de Mano", "La Tostada"],
      ["El Arequipe", "Los Platanitos", "La Guascas", "El Mole", "La Malta", "La Crema", "El Curtido", "La Yuca", "El Nopal", "La Cerveza Águila", "Los Totopos", "El Refresco Pilsener", "Los Takis", "La Manteca", "La Juanita", "La Finca"],
      ["La Sopa", "El Klass", "La Victoria", "El Atol", "La Chicha", "El Maseca", "La Harina Pan", "El Aguacate", "La Costeña", "Los Zambos", "El Café Águila", "La Colombiana", "La Pupusa", "Las Sabritas", "La Guadalupe", "El Gallo"],
      ["La Corona", "Los Quipitos", "La Mayonessa", "El Milagro", "Los Takis", "La Juanita", "La Finca", "La Sopa", "El Klass", "La Victoria", "El Atol", "La Chicha", "El Sello Rojo", "La Panela", "El Plátano", "El Loroco"],
      ["El Tequeño", "El Achiote", "Los Frijoles", "La Cachapa", "El Chile", "El Tamal", "Los Chicharrones", "La Baleada", "El Queso de Mano", "La Tostada", "El Arequipe", "Los Platanitos", "La Guascas", "El Mole", "La Malta", "La Crema"]
    ];

    let deck = [...cards];
    let currentIndex = deck.length;
    let isPlaying = false;
    let intervalId = null;

    function shuffleDeck() {
      for (let i = currentIndex - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [deck[i], deck[j]] = [deck[j], deck[i]];
      }
    }

    function drawCard() {
      if (currentIndex === 0) {
        alert("¡Se han usado todas las cartas! Barajando de nuevo...");
        deck = [...cards];
        currentIndex = deck.length;
        shuffleDeck();
      }
      currentIndex--;
      const card = deck[currentIndex];
      document.getElementById("card-name").textContent = card.name;
      const imageDiv = document.getElementById("card-image");
      imageDiv.classList.add("loading");
      imageDiv.innerHTML = `<img src="${card.image}" alt="${card.name}" onload="this.parentElement.classList.remove('loading')" onerror="this.src='https://via.placeholder.com/200x300?text=${encodeURIComponent(card.name)}'">`;
      document.getElementById("sound-effect").play();
      speakCard(card);
    }

    function speakCard(card) {
      const utterance1 = new SpeechSynthesisUtterance(card.name);
      utterance1.lang = "es-MX";
      utterance1.rate = 0.9;
      utterance1.pitch = 1;
      const utterance2 = new SpeechSynthesisUtterance(card.name);
      utterance2.lang = "es-MX";
      utterance2.rate = 0.9;
      utterance2.pitch = 1;
      window.speechSynthesis.speak(utterance1);
      setTimeout(() => window.speechSynthesis.speak(utterance2), 2000);
    }

    function togglePlay() {
      if (isPlaying) return;
      isPlaying = true;
      document.getElementById("play-button").style.display = "none";
      document.getElementById("pause-button").style.display = "inline-block";
      document.getElementById("resume-button").style.display = "none";
      drawCard();
      const speed = parseInt(document.getElementById("speed-select").value);
      intervalId = setInterval(drawCard, speed);
    }

    function pauseGame() {
      if (!isPlaying) return;
      clearInterval(intervalId);
      isPlaying = false;
      document.getElementById("pause-button").style.display = "none";
      document.getElementById("resume-button").style.display = "inline-block";
    }

    function resumeGame() {
      if (isPlaying) return;
      isPlaying = true;
      document.getElementById("pause-button").style.display = "inline-block";
      document.getElementById("resume-button").style.display = "none";
      const speed = parseInt(document.getElementById("speed-select").value);
      intervalId = setInterval(drawCard, speed);
    }

    function resetGame() {
      clearInterval(intervalId);
      isPlaying = false;
      deck = [...cards];
      currentIndex = deck.length;
      shuffleDeck();
      document.getElementById("card-name").textContent = "";
      document.getElementById("card-image").innerHTML = "Selecciona una carta";
      document.getElementById("play-button").style.display = "inline-block";
      document.getElementById("pause-button").style.display = "none";
      document.getElementById("resume-button").style.display = "none";
      loadTablero();
    }

    function updateSpeed() {
      if (isPlaying) {
        clearInterval(intervalId);
        const speed = parseInt(document.getElementById("speed-select").value);
        intervalId = setInterval(drawCard, speed);
      }
    }

    function loadTablero() {
      const tablero = tableros[Math.floor(Math.random() * tableros.length)];
      const tableroDiv = document.getElementById("tablero");
      tableroDiv.innerHTML = tablero.map(name => {
        const card = cards.find(c => c.name === name);
        return `<img src="${card.image}" alt="${name}" style="width: 50px; height: 75px; border-radius: 5px;">`;
      }).join('');
    }

    // Initialize
    shuffleDeck();
    window.onload = loadTablero;
  </script>
</body>
</html>
